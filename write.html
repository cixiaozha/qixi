<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<title>写信给轩轩</title>
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
  import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyD-uySj9cGYhkwrJdotbAfsbm8tb0fFLxs",
    authDomain: "letter-7e55f.firebaseapp.com",
    projectId: "letter-7e55f",
    storageBucket: "letter-7e55f.firebasestorage.app",
    messagingSenderId: "548585980662",
    appId: "1:548585980662:web:04b91b01d509f54f9562d7",
    measurementId: "G-RQ90689GRT"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  let senderName = '';

  window.onload = () => {
    senderName = prompt("请输入你的昵称：") || "匿名";
  };

  window.sendMessage = async () => {
    const text = document.getElementById("messageText").value.trim();
    if (!text) { alert("信件内容不能为空"); return; }

    try {
      await addDoc(collection(db, "messages"), {
        from: senderName,
        to: "轩轩",
        text: text,
        timestamp: serverTimestamp()
      });
      alert("发送成功！");
      document.getElementById("messageText").value = "";
    } catch (e) {
      console.error(e);
      alert("发送失败，请检查配置");
    }
  };
</script>
<style>
  body{font-family: Arial,sans-serif;background:#0b1220;color:#fff;display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;margin:0;padding:20px;}
  textarea{width:100%;max-width:500px;height:150px;padding:10px;border-radius:8px;border:none;resize:none;}
  button{margin-top:12px;padding:10px 20px;border:none;border-radius:999px;background:linear-gradient(90deg,#33d1ff,#7affc2);color:#07101a;font-weight:700;cursor:pointer;}
</style>
</head>
<body>
<h2>给轩轩写信</h2>
<textarea id="messageText" placeholder="写下你的信..."></textarea>
<button onclick="sendMessage()">发送</button>
</body>
</html>
