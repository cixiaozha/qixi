<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>è½©è½©ç”Ÿæ—¥å€’è®¡æ—¶</title>
<style>
  :root{
    --bg1:#0b1220;
    --accent:#33d1ff;
    --accent2:#7affc2;
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;font-family:Inter,ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial;}
  body{
    background: radial-gradient(1200px 600px at 10% 20%, rgba(15,30,60,0.35), transparent),
                linear-gradient(180deg,var(--bg1) 0%, #07101a 100%);
    color:#cfeeff;
    overflow:hidden;
    display:flex;
    align-items:center;
    justify-content:center;
    padding:24px;
  }
  #fxCanvas{position:fixed;inset:0;z-index:0;pointer-events:none}
  .ui{
    position:relative;
    z-index:2;
    width:100%;
    max-width:980px;
    text-align:center;
    padding:28px;
    border-radius:16px;
    background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));
    box-shadow:0 10px 40px rgba(2,6,23,0.7), inset 0 1px 0 rgba(255,255,255,0.03);
    backdrop-filter:blur(6px) saturate(120%);
    transition:opacity 1s ease, transform 1s ease;
  }
  .ui.fade-out{
    opacity:0;
    transform:scale(0.96);
    pointer-events:none;
  }
  h1{margin:0 0 14px 0;font-weight:600;letter-spacing:1px;font-size:28px;color:#dff9ff;}
  p.lead{margin:0 0 20px 0;color:#96f0ff;opacity:0.9;font-size:14px;}
  .countdown{display:flex;gap:14px;justify-content:center;flex-wrap:wrap;margin-bottom:22px;}
  .cell{min-width:86px;padding:16px 10px;border-radius:12px;background:rgba(255,255,255,0.03);color:#e6fbff;}
  .num{font-size:34px;font-weight:700;letter-spacing:1px;color:#fff;}
  .label{font-size:12px;color:rgba(255,255,255,0.65);margin-top:6px}
  .enter-btn{
    display:inline-block;
    margin-top:16px;
    padding:12px 24px;
    border-radius:999px;
    background:linear-gradient(90deg,var(--accent),var(--accent2));
    color:#07101a;
    font-weight:700;
    text-decoration:none;
    box-shadow:0 8px 30px rgba(51,209,255,0.12),0 2px 6px rgba(0,0,0,0.4);
    transform:translateY(0);
    transition:transform .22s ease,box-shadow .22s;
    animation:glow 3s ease-in-out infinite alternate;
  }
  .enter-btn:hover{transform:translateY(-4px);}
  @keyframes glow{
    from{box-shadow:0 0 8px var(--accent);}
    to{box-shadow:0 0 18px var(--accent2);}
  }
  .celebration-msg{
    position:absolute;
    left:50%;top:50%;
    transform:translate(-50%,-50%) scale(.9);
    z-index:3;
    pointer-events:none;
    color:#fff;
    text-align:center;
    opacity:0;
  }
  .celebration-msg.show{
    opacity:1;
    pointer-events:auto;
    animation:popIn .9s cubic-bezier(.2,.9,.3,1);
  }
  .celebration-msg h2{font-size:46px;margin:0 0 12px 0;}
  .celebration-msg p{margin:0;color:rgba(255,255,255,0.9);font-size:18px}
  @keyframes popIn{0%{transform:translate(-50%,-50%) scale(.6);opacity:0}60%{transform:translate(-50%,-50%) scale(1.06);opacity:1}100%{transform:translate(-50%,-50%) scale(1)}}
</style>
</head>
<body>
<canvas id="fxCanvas"></canvas>

<div class="ui" id="ui">
  <h1>è·ç¦»è½©è½©ç”Ÿæ—¥è¿˜æœ‰</h1>
  <p class="lead">ç§‘æŠ€æ—¶é’Ÿæ­£åœ¨è¯»ç§’â€¦ å‡†å¤‡å¥½æƒŠå–œäº†å—ï¼Ÿ</p>

  <div class="countdown" id="countdown">
    <div class="cell"><div class="num" id="days">0</div><div class="label">å¤©</div></div>
    <div class="cell"><div class="num" id="hours">0</div><div class="label">å°æ—¶</div></div>
    <div class="cell"><div class="num" id="minutes">0</div><div class="label">åˆ†é’Ÿ</div></div>
    <div class="cell"><div class="num" id="seconds">0</div><div class="label">ç§’</div></div>
  </div>

  <a class="enter-btn" id="enterBtn" href="story.html">è¿›å…¥æˆ‘ä»¬çš„æ•…äº‹å†Œ</a>
</div>

<div class="celebration-msg" id="celebrationMsg" aria-hidden="true">
  <h2 id="mainText">ğŸ‚ è½©è½©ç”Ÿæ—¥å¿«ä¹</h2>
  <p id="subText">å†°å†°ä¸€ç›´éƒ½åœ¨ä½ èº«è¾¹ ğŸ’™</p>
</div>

<!-- ğŸµ ç”Ÿæ—¥å¿«ä¹æ­Œï¼ˆä½ å¯ä»¥æ¢æˆè‡ªå·±å–œæ¬¢çš„mp3é“¾æ¥ï¼‰ -->
<audio id="bgm" src="https://cdn.pixabay.com/audio/2022/10/24/audio_2f0edc4a88.mp3" preload="auto"></audio>

<script>
const TARGET = new Date('2025-11-14T00:00:00');
const CANVAS = document.getElementById('fxCanvas');
const ctx = CANVAS.getContext('2d');
let W = CANVAS.width = innerWidth;
let H = CANVAS.height = innerHeight;
const daysEl = document.getElementById('days');
const hoursEl = document.getElementById('hours');
const minutesEl = document.getElementById('minutes');
const secondsEl = document.getElementById('seconds');
const celebrationMsg = document.getElementById('celebrationMsg');
const ui = document.getElementById('ui');
const bgm = document.getElementById('bgm');

addEventListener('resize', ()=>{ W = CANVAS.width = innerWidth; H = CANVAS.height = innerHeight; });
let userInteracted = false;
document.addEventListener('click', () => { userInteracted = true; if(bgm.paused) bgm.play().catch(()=>{}); });

function pad(n){ return n.toString().padStart(2,'0'); }

let countdownTimer = null;
function updateCountdown(){
  const now = new Date();
  let diff = TARGET - now;
  if(diff <= 0){
    clearInterval(countdownTimer);
    showCelebration();
    return;
  }
  const days = Math.floor(diff / (1000*60*60*24));
  const hours = Math.floor((diff % (1000*60*60*24)) / (1000*60*60));
  const minutes = Math.floor((diff % (1000*60*60)) / (1000*60));
  const seconds = Math.floor((diff % (1000*60)) / 1000);
  daysEl.textContent = days;
  hoursEl.textContent = pad(hours);
  minutesEl.textContent = pad(minutes);
  secondsEl.textContent = pad(seconds);
}
updateCountdown();
countdownTimer = setInterval(updateCountdown, 1000);

if(new Date() >= TARGET){
  clearInterval(countdownTimer);
  setTimeout(showCelebration, 300);
}

// âœ¨ ç²’å­ + åŠ¨ç”»éƒ¨åˆ†
let particles = [], hearts = [], celebrationActive = false;
class P {
  constructor(x,y,dx,dy,size,color,life){this.x=x;this.y=y;this.vx=dx;this.vy=dy;this.r=size;this.c=color;this.life=life||1;this.alpha=1;}
  update(dt){this.x+=this.vx*dt;this.y+=this.vy*dt;this.vy*=0.999;this.alpha-=0.008*dt;this.life-=0.008*dt;}
  draw(g){g.save();g.globalAlpha=Math.max(this.alpha,0);g.fillStyle=this.c;g.beginPath();g.arc(this.x,this.y,this.r,0,Math.PI*2);g.fill();g.restore();}
}
function spawnNeonBurst(x,y,count){for(let i=0;i<count;i++){const a=Math.random()*Math.PI*2,s=60+Math.random()*220;particles.push(new P(x,y,Math.cos(a)*s,Math.sin(a)*s,2+Math.random()*5,`hsl(${180+Math.random()*120},90%,60%)`,1));}}
function spawnHeartParticles(total=160){const scale=Math.min(W,H)/60;for(let i=0;i<total;i++){const t=(i/total)*Math.PI*2;const x=16*Math.pow(Math.sin(t),3);const y=13*Math.cos(t)-5*Math.cos(2*t)-2*Math.cos(3*t)-Math.cos(4*t);const px=W/2+x*scale, py=H/2-y*scale;hearts.push(new P(px,py,(Math.random()-0.5)*20,(Math.random()-0.5)*20,3+Math.random()*3,`hsl(${320+Math.random()*40},90%,65%)`,2.2));}}
function loop(now){ctx.clearRect(0,0,W,H);for(let p of particles)p.update(1),p.draw(ctx);for(let p of hearts)p.update(0.6),p.draw(ctx);particles=particles.filter(p=>p.life>0&&p.alpha>0);hearts=hearts.filter(p=>p.life>0&&p.alpha>0);requestAnimationFrame(loop);}requestAnimationFrame(loop);

async function showCelebration(){
  if(celebrationActive)return;
  celebrationActive=true;
  ui.classList.add('fade-out');
  await new Promise(r=>setTimeout(r,400));
  if(userInteracted){
    bgm.volume = 0.6;
    bgm.loop = true;
    bgm.play().catch(()=>{alert("ç‚¹ä¸€ä¸‹é¡µé¢ä»¥å¼€å¯éŸ³ä¹å“¦ğŸµ");});
  } else {
    alert("ğŸµ ç‚¹ä¸€ä¸‹é¡µé¢ï¼Œå¼€å¯ç”Ÿæ—¥å¿«ä¹æ­Œï¼");
  }
  spawnNeonBurst(W/2,H/2,220);
  setTimeout(()=>spawnHeartParticles(240),600);
  celebrationMsg.classList.add('show');
}
</script>
</body>
</html>
