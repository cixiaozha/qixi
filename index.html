<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>è½©è½©ç”Ÿæ—¥å€’è®¡æ—¶</title>
<style>
  :root{
    --bg1:#0b1220;
    --accent:#33d1ff;
    --accent2:#7affc2;
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;font-family:Inter,ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial;}
  body{
    background: radial-gradient(1200px 600px at 10% 20%, rgba(15,30,60,0.35), transparent),
                linear-gradient(180deg,var(--bg1) 0%, #07101a 100%);
    color:#cfeeff;
    overflow:hidden;
    display:flex;
    align-items:center;
    justify-content:center;
    padding:24px;
  }
  #fxCanvas{position:fixed;inset:0;z-index:0;pointer-events:none}
  .ui{
    position:relative;
    z-index:2;
    width:100%;
    max-width:980px;
    text-align:center;
    padding:28px;
    border-radius:16px;
    background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));
    box-shadow:0 10px 40px rgba(2,6,23,0.7), inset 0 1px 0 rgba(255,255,255,0.03);
    backdrop-filter:blur(6px) saturate(120%);
  }
  h1{margin:0 0 14px 0;font-weight:600;letter-spacing:1px;font-size:28px;color:#dff9ff;transition:opacity .8s ease;}
  p.lead{margin:0 0 20px 0;color:#96f0ff;opacity:0.9;font-size:14px;transition:opacity .8s ease;}
  .countdown{display:flex;gap:14px;justify-content:center;flex-wrap:wrap;margin-bottom:22px;transition:opacity .8s ease, transform .8s ease;}
  .cell{min-width:86px;padding:16px 10px;border-radius:12px;background:rgba(255,255,255,0.03);color:#e6fbff;}
  .num{font-size:34px;font-weight:700;letter-spacing:1px;color:#fff;}
  .label{font-size:12px;color:rgba(255,255,255,0.65);margin-top:6px}
  .enter-btn{
    display:inline-block;
    margin-top:16px;
    padding:12px 24px;
    border-radius:999px;
    background:linear-gradient(90deg,var(--accent),var(--accent2));
    color:#07101a;
    font-weight:700;
    text-decoration:none;
    box-shadow:0 8px 30px rgba(51,209,255,0.12),0 2px 6px rgba(0,0,0,0.4);
    transform:translateY(0);
    transition:transform .22s ease;
    animation:glow 3s ease-in-out infinite alternate;
  }
  .enter-btn:hover{transform:translateY(-4px);}
  @keyframes glow{from{box-shadow:0 0 8px var(--accent);}to{box-shadow:0 0 18px var(--accent2);}}
  .celebration-msg{
    position:absolute;
    left:50%;top:50%;
    transform:translate(-50%,-50%) scale(.9);
    z-index:3;
    color:#fff;
    text-align:center;
    opacity:0;
  }
  .celebration-msg.show{
    opacity:1;
    animation:popIn .9s cubic-bezier(.2,.9,.3,1);
  }
  .celebration-msg h2{font-size:46px;margin:0 0 12px 0;}
  .celebration-msg p{margin:0;color:rgba(255,255,255,0.9);font-size:18px}
  @keyframes popIn{0%{transform:translate(-50%,-50%) scale(.6);opacity:0}60%{transform:translate(-50%,-50%) scale(1.06);opacity:1}100%{transform:translate(-50%,-50%) scale(1)}}

  /* å€’è®¡æ—¶æ·¡å‡º */
  .fade-out {
    opacity: 0;
    transform: translateY(-10px);
    pointer-events: none;
  }

  /* å¼¹å¹•æ ·å¼ */
  .danmu {
    position: fixed;
    white-space: nowrap;
    font-size: 18px;
    font-weight: 600;
    color: #fff;
    pointer-events: none;
    opacity: 0;
    z-index: 100;
    animation: fly 8s linear forwards;
  }
  @keyframes fly {
    0% { transform: translateX(100vw); opacity: 1; }
    90% { opacity: 1; }
    100% { transform: translateX(-120vw); opacity: 0; }
  }
</style>
</head>
<body>
<canvas id="fxCanvas"></canvas>

<div class="ui" id="ui">
  <h1 id="title">è·ç¦»è½©è½©ç”Ÿæ—¥è¿˜æœ‰</h1>
  <p class="lead" id="lead">ç§‘æŠ€æ—¶é’Ÿæ­£åœ¨è¯»ç§’â€¦ å‡†å¤‡å¥½æƒŠå–œäº†å—ï¼Ÿ</p>

  <div class="countdown" id="countdown">
    <div class="cell"><div class="num" id="days">0</div><div class="label">å¤©</div></div>
    <div class="cell"><div class="num" id="hours">0</div><div class="label">å°æ—¶</div></div>
    <div class="cell"><div class="num" id="minutes">0</div><div class="label">åˆ†é’Ÿ</div></div>
    <div class="cell"><div class="num" id="seconds">0</div><div class="label">ç§’</div></div>
  </div>

  <a class="enter-btn" href="story.html">è¿›å…¥æˆ‘ä»¬çš„æ•…äº‹å†Œ</a>
</div>

<div class="celebration-msg" id="celebrationMsg">
  <h2>ğŸ‚ è½©è½©ç”Ÿæ—¥å¿«ä¹</h2>
  <p>å†°å†°ä¸€ç›´éƒ½åœ¨ä½ èº«è¾¹ ğŸ’™</p>
</div>

<audio id="bgm" src="happy.mp3" preload="auto"></audio>

<script>
const TARGET = new Date('2025-11-14T00:00:00');
const daysEl = document.getElementById('days');
const hoursEl = document.getElementById('hours');
const minutesEl = document.getElementById('minutes');
const secondsEl = document.getElementById('seconds');
const countdown = document.getElementById('countdown');
const title = document.getElementById('title');
const lead = document.getElementById('lead');
const celebrationMsg = document.getElementById('celebrationMsg');
const bgm = document.getElementById('bgm');
let countdownTimer = null;
let celebrationActive = false;
let userInteracted = false;
document.addEventListener('click',()=>{userInteracted=true;if(bgm.paused)bgm.play().catch(()=>{});});

function pad(n){return n.toString().padStart(2,'0');}
function updateCountdown(){
  const now=new Date();
  let diff=TARGET-now;
  if(diff<=0){clearInterval(countdownTimer);showCelebration();return;}
  const days=Math.floor(diff/86400000);
  const hours=Math.floor((diff%86400000)/3600000);
  const minutes=Math.floor((diff%3600000)/60000);
  const seconds=Math.floor((diff%60000)/1000);
  daysEl.textContent=days;
  hoursEl.textContent=pad(hours);
  minutesEl.textContent=pad(minutes);
  secondsEl.textContent=pad(seconds);
}
updateCountdown();
countdownTimer=setInterval(updateCountdown,1000);

if(new Date()>=TARGET){
  clearInterval(countdownTimer);
  setTimeout(showCelebration,300);
}

function showCelebration(){
  if(celebrationActive)return;
  celebrationActive=true;
  if(countdownTimer){clearInterval(countdownTimer);}
  // æ·¡å‡ºå€’è®¡æ—¶ä¸æ–‡å­—
  countdown.classList.add('fade-out');
  title.classList.add('fade-out');
  lead.classList.add('fade-out');
  setTimeout(()=>{countdown.style.display='none';title.style.display='none';lead.style.display='none';},900);

  if(userInteracted){
    bgm.volume=0.6; bgm.loop=true; bgm.play().catch(()=>{});
  } else { alert("ç‚¹ä¸€ä¸‹é¡µé¢ï¼Œå¼€å¯ç”Ÿæ—¥å¿«ä¹æ­ŒğŸµ"); }

  celebrationMsg.classList.add('show');

  startDanmu();
}

// å¼¹å¹•ç¥ç¦æŒç»­å¾ªç¯
const messages=[
  "å˜¿ï¼Œè½©è½©ï½ä»Šå¤©æ˜¯ä½ çš„ç”Ÿæ—¥ï¼ğŸ¥³",
  "åˆé•¿å¤§ä¸€å²å•¦ï¼Œè¶Šæ¥è¶Šå¸…äº†æ˜¯ä¸æ˜¯ï½",
  "è›‹ç³•ä¸€å®šè¦åƒï¼Œæ„¿æœ›ä¸€å®šå®ç°ğŸ‚",
  "å¸Œæœ›ä½ è¿™ä¸€å¹´éƒ½é¡ºé¡ºåˆ©åˆ©âœ¨",
  "å¤šç¬‘ç¬‘ï¼Œå‹åŠ›éƒ½ç»™æˆ‘æ‰”æ‰ï¼ğŸ˜",
  "å…¶å®æœ‰ç‚¹æƒ³ä½ ~",
  "ä½ çœŸçš„å¾ˆæ£’ğŸ’ª",
  "æˆ‘ä¸€ç›´åœ¨è¿™å„¿ï¼Œçœ‹ç€ä½ ä¸€ç‚¹ç‚¹å˜å¥½ã€‚ğŸ’™",
  "å¤©å¤©å¼€å¿ƒï¼ğŸŒˆ"
];
const colors=["#33d1ff","#7affc2","#fff","#ffb3ff","#ffe47a"];

function createDanmu(){
  const text=messages[Math.floor(Math.random()*messages.length)];
  const dan=document.createElement('div');
  dan.className='danmu';
  dan.textContent=text;
  dan.style.top=Math.random()*80+10+"%";
  dan.style.color=colors[Math.floor(Math.random()*colors.length)];
  dan.style.fontSize=(16+Math.random()*6)+'px';
  document.body.appendChild(dan);
  setTimeout(()=>dan.remove(),8000);
}

function startDanmu(){
  setInterval(()=>createDanmu(),1000); // æ¯ç§’ä¸€æ¡
}
</script>
</body>
</html>
