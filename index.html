<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>轩轩的七日互动 · 科技柔光版</title>

<style>
  body {
    margin: 0;
    font-family: 'Helvetica Neue', sans-serif;
    background: linear-gradient(135deg, #f6f7fb, #eef2f7, #f8fbff);
    color: #333;
    overflow: hidden;
  }

  h1 {
    text-align: center;
    margin-top: 60px;
    font-weight: 600;
    font-size: 28px;
    color: #222;
    opacity: 0.9;
  }

  .subtitle {
    text-align: center;
    margin-top: 10px;
    font-size: 16px;
    opacity: 0.55;
  }

  /* 互动容器 */
  #interactiveArea {
    position: absolute;
    top: 160px;
    left: 50%;
    transform: translateX(-50%);
    width: 92%;
    height: 58vh;
    background: rgba(255,255,255,0.45);
    border-radius: 22px;
    backdrop-filter: blur(16px);
    box-shadow: 0 6px 20px rgba(0,0,0,0.07);
    overflow: hidden;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  /* 底部按钮：磨砂栏 */
  .bottom-bar {
    position: fixed;
    bottom: 0;
    width: 100%;
    height: 70px;
    backdrop-filter: blur(14px);
    background: rgba(255,255,255,0.55);
    border-top: 1px solid rgba(200,200,200,0.35);
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .story-btn {
    padding: 12px 26px;
    font-size: 16px;
    border-radius: 14px;
    border: none;
    background: linear-gradient(135deg, #d7e1f3, #eef3ff);
    box-shadow: 0 4px 10px rgba(0,0,0,0.08);
    backdrop-filter: blur(10px);
    cursor: pointer;
    transition: 0.25s;
  }
  .story-btn:hover {
    transform: translateY(-3px);
    box-shadow: 0 6px 16px rgba(0,0,0,0.12);
  }

  /* 互动组件公共样式 */
  canvas, .effectBox {
    width: 100%;
    height: 100%;
  }

</style>
</head>

<body>

<h1 id="title">今日互动</h1>
<div class="subtitle" id="subTitle"></div>

<!-- 互动容器 -->
<div id="interactiveArea"></div>

<!-- 底部磨砂按钮 -->
<div class="bottom-bar">
  <button class="story-btn" onclick="location.href='story.html'">进入故事册</button>
</div>

<script>
/* 七天标题 */
const titles = [
  "周日 · 人格碎片拼图",
  "周一 · 能量充电条",
  "周二 · 情绪月相",
  "周三 · 色彩扫描",
  "周四 · 流星雨",
  "周五 · 心跳节奏机",
  "周六 · 幸运草实验室"
];

/* 七天副标题 */
const subtitles = [
  "今天的你，是由很多碎片拼起来的完整宝贝 ✦",
  "新的开始，能量正在缓慢充满 ✦",
  "你的情绪像月亮一样柔软又神秘 ✦",
  "今天的你，是光谱里最亮的颜色 ✦",
  "夜空在为你落下小小祝福 ✦",
  "心跳比任何语言更真实 ✦",
  "今天你的幸运值被秘密调高了一点 ✦"
];

const day = new Date().getDay();
document.getElementById("title").innerText = titles[day];
document.getElementById("subTitle").innerText = subtitles[day];

const area = document.getElementById("interactiveArea");

/* --- 实现七个不同互动 --- */

/* 周一：能量充电条 */
function energyBar() {
  const box = document.createElement("div");
  box.className = "effectBox";
  box.innerHTML = `
    <div style='width:80%;height:26px;border-radius:20px;border:2px solid #c8d2e6;overflow:hidden;'>
      <div id='fill' style='height:100%;width:0;background:linear-gradient(90deg,#a0c7ff,#7bb0ff);transition:1.5s;border-radius:20px;'></div>
    </div>
  `;
  area.appendChild(box);

  setTimeout(()=>{ document.getElementById("fill").style.width = "100%"; },300);
}

/* 周二：情绪月相 */
function moodMoon() {
  const canvas = document.createElement("canvas");
  area.appendChild(canvas);
  const ctx = canvas.getContext("2d");

  function resize() {
    canvas.width = area.clientWidth;
    canvas.height = area.clientHeight;
  }
  resize();
  window.addEventListener("resize", resize);

  let phase = 0;
  function draw() {
    ctx.clearRect(0,0,canvas.width,canvas.height);
    const r = 90;
    const x = canvas.width/2;
    const y = canvas.height/2;
    ctx.fillStyle="#fff";
    ctx.beginPath();
    ctx.arc(x,y,r,0,Math.PI*2);
    ctx.fill();

    ctx.globalCompositeOperation="destination-out";
    ctx.beginPath();
    ctx.arc(x + (phase*0.8-40), y, r+10, 0, Math.PI*2);
    ctx.fill();
    ctx.globalCompositeOperation="source-over";

    phase += 0.015;
    requestAnimationFrame(draw);
  }
  draw();
}

/* 周三：色彩扫描 */
function colorScan() {
  const box = document.createElement("div");
  box.className = "effectBox";
  box.style.position = "relative";
  box.innerHTML = `
    <div id="scanner" style="
      position:absolute;top:0;left:0;width:100%;height:4px;
      background:linear-gradient(90deg,#a1c4fd,#c2e9fb,#b5dafe);
      box-shadow:0 0 18px #a1c4fd;
      animation: scan 2.5s infinite;
    "></div>
  `;
  area.appendChild(box);

  const style = document.createElement("style");
  style.innerHTML = `
  @keyframes scan {
    0% { top:0; }
    50% { top:calc(100% - 4px); }
    100% { top:0; }
  }`;
  document.head.appendChild(style);
}

/* 周四：流星雨 */
function starRain() {
  const canvas = document.createElement("canvas");
  area.appendChild(canvas);
  const ctx = canvas.getContext("2d");

  function resize() {
    canvas.width = area.clientWidth;
    canvas.height = area.clientHeight;
  }
  resize();

  const stars = [];
  for(let i=0;i<40;i++){
    stars.push({
      x: Math.random()*canvas.width,
      y: Math.random()*canvas.height,
      speed: 2 + Math.random()*3,
      len: 8 + Math.random()*10
    });
  }

  function draw() {
    ctx.clearRect(0,0,canvas.width,canvas.height);
    ctx.strokeStyle="rgba(160,180,255,0.7)";
    ctx.lineWidth = 2;
    stars.forEach(s=>{
      ctx.beginPath();
      ctx.moveTo(s.x, s.y);
      ctx.lineTo(s.x - s.len, s.y + s.len);
      ctx.stroke();
      s.x -= s.speed;
      s.y += s.speed;
      if(s.y > canvas.height) {
        s.x = Math.random()*canvas.width;
        s.y = -20;
      }
    });
    requestAnimationFrame(draw);
  }
  draw();
}

/* 周五：心跳 */
function heartbeat() {
  const box = document.createElement("div");
  box.className = "effectBox";
  box.style.display="flex";
  box.style.justifyContent="center";
  box.style.alignItems="center";
  box.innerHTML = `
    <div id="heart" style="
      width:90px;height:90px;
      background:#ff8fa7;
      mask:url('https://upload.wikimedia.org/wikipedia/commons/4/42/Love_Heart_symbol.svg') center/contain no-repeat;
      animation: beat 1.2s infinite;
    "></div>
  `;
  area.appendChild(box);

  const style = document.createElement("style");
  style.innerHTML = `
    @keyframes beat {
      0% { transform:scale(1); }
      50% { transform:scale(1.25); }
      100% { transform:scale(1); }
    }`;
  document.head.appendChild(style);
}

/* 周六：幸运草 */
function luckLab() {
  const box = document.createElement("div");
  box.className = "effectBox";
  box.style.position="relative";

  box.innerHTML = `
    <div style="font-size:22px;text-align:center;opacity:0.65;">今日幸运值</div>
    <div id="luckNum" style="font-size:40px;text-align:center;margin-top:20px;font-weight:600;">--</div>
  `;
  area.appendChild(box);

  setTimeout(()=>{
    document.getElementById("luckNum").innerText = Math.floor(Math.random()*51)+50 + " / 100";
  },400);
}

/* 周日：人格碎片拼图 */
function personaTiles() {
  const box = document.createElement("div");
  box.className = "effectBox";
  box.style.display="grid";
  box.style.gridTemplateColumns="repeat(4,1fr)";
  box.style.gridGap="6px";

  for(let i=0;i<12;i++){
    const tile = document.createElement("div");
    tile.style.height="70px";
    tile.style.borderRadius="10px";
    tile.style.background="linear-gradient(135deg,#d3e0ff,#eef3ff)";
    tile.style.transition="0.3s";
    tile.onclick = ()=> tile.style.background="linear-gradient(135deg,#97b7ff,#bcd3ff)";
    box.appendChild(tile);
  }
  area.appendChild(box);
}

/* 根据星期几加载互动效果 */
const interactions = [
  personaTiles,
  energyBar,
  moodMoon,
  colorScan,
  starRain,
  heartbeat,
  luckLab
];

interactions[day]();

</script>

</body>
</html>
