<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>è½©è½©ç”Ÿæ—¥å€’è®¡æ—¶</title>
<style>
  :root {
    --bg1: #0b1220;
    --accent: #33d1ff;
    --accent2: #7affc2;
  }
  *{box-sizing:border-box;margin:0;padding:0;}
  html,body{
    height:100%;
    font-family: "Inter", "PingFang SC", "Microsoft YaHei", sans-serif;
    overflow:hidden;
  }
  body{
    background: radial-gradient(circle at 20% 20%, rgba(40,80,120,0.3), transparent),
                linear-gradient(180deg, var(--bg1) 0%, #07101a 100%);
    color:#cfeeff;
    display:flex;
    align-items:center;
    justify-content:center;
  }

  #fxCanvas{
    position:fixed;
    inset:0;
    z-index:0;
    pointer-events:none;
  }

  .ui{
    position:relative;
    z-index:2;
    text-align:center;
    padding:28px;
    border-radius:16px;
    background:rgba(255,255,255,0.05);
    box-shadow:0 0 30px rgba(0,0,0,0.4);
    backdrop-filter:blur(8px);
    transition:opacity 1s ease, transform 1s ease;
  }
  .fade-out{
    opacity:0;
    transform:scale(0.9);
    pointer-events:none;
  }

  h1{margin-bottom:12px;font-size:28px;color:#dff9ff;}
  .lead{color:#aeeaff;margin-bottom:22px;font-size:14px;}
  .countdown{display:flex;gap:16px;justify-content:center;margin-bottom:20px;}
  .cell{min-width:80px;padding:10px 0;border-radius:10px;background:rgba(255,255,255,0.05);}
  .num{font-size:30px;font-weight:700;}
  .label{font-size:12px;color:rgba(255,255,255,0.7);}

  .enter-btn{
    position:fixed;
    bottom:24px;
    right:24px;
    background:linear-gradient(90deg,var(--accent),var(--accent2));
    color:#07101a;
    border-radius:999px;
    padding:12px 24px;
    font-weight:600;
    text-decoration:none;
    z-index:100;
    box-shadow:0 0 12px rgba(122,255,194,0.4);
    transition:transform .2s;
  }
  .enter-btn:hover{transform:translateY(-3px);}

  .celebration-msg{
    position:fixed;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%) scale(.9);
    opacity:0;
    z-index:10;
    text-align:center;
    color:#fff;
    transition:opacity 1s ease, transform .6s ease;
  }
  .celebration-msg.show{
    opacity:1;
    transform:translate(-50%,-50%) scale(1);
  }
  .celebration-msg h2{font-size:44px;margin-bottom:12px;}
  .celebration-msg p{font-size:18px;opacity:0.9;}

  .popup-message{
    position:fixed;
    left:50%;
    top:50%;
    transform:translate(-50%,-50%) scale(0.8);
    background:rgba(255,255,255,0.08);
    backdrop-filter:blur(6px);
    padding:12px 20px;
    border-radius:12px;
    color:#fff;
    font-size:18px;
    font-weight:600;
    opacity:0;
    box-shadow:0 0 20px rgba(51,209,255,0.3);
    transition:all 0.8s ease;
    z-index:99;
    pointer-events:none;
  }
</style>
</head>
<body>
<canvas id="fxCanvas"></canvas>

<div class="ui" id="ui">
  <h1>è·ç¦»è½©è½©ç”Ÿæ—¥è¿˜æœ‰</h1>
  <p class="lead">ç§‘æŠ€æ—¶é’Ÿæ­£åœ¨è¯»ç§’â€¦ å‡†å¤‡å¥½æƒŠå–œäº†å—ï¼Ÿ</p>
  <div class="countdown" id="countdown">
    <div class="cell"><div class="num" id="days">0</div><div class="label">å¤©</div></div>
    <div class="cell"><div class="num" id="hours">00</div><div class="label">å°æ—¶</div></div>
    <div class="cell"><div class="num" id="minutes">00</div><div class="label">åˆ†é’Ÿ</div></div>
    <div class="cell"><div class="num" id="seconds">00</div><div class="label">ç§’</div></div>
  </div>
</div>

<a class="enter-btn" href="story.html">è¿›å…¥æˆ‘ä»¬çš„æ•…äº‹å†Œ</a>

<div class="celebration-msg" id="celebrationMsg">
  <h2>ğŸ‰ è½©è½©ç”Ÿæ—¥å¿«ä¹ï¼</h2>
  <p>æ„¿è¿™ä¸€å¹´æ¯ä¸€å¤©éƒ½é—ªé—ªå‘å…‰ âœ¨</p>
</div>

<audio id="bgm" src="happy.mp3" preload="auto"></audio>

<script>
const target = new Date('2025-11-14T00:00:00');
const ui = document.getElementById('ui');
const bgm = document.getElementById('bgm');
const celebrationMsg = document.getElementById('celebrationMsg');

const daysEl = document.getElementById('days');
const hoursEl = document.getElementById('hours');
const minutesEl = document.getElementById('minutes');
const secondsEl = document.getElementById('seconds');

function pad(n){ return n.toString().padStart(2,'0'); }

let timer = setInterval(updateCountdown, 1000);
updateCountdown();

function updateCountdown(){
  const now = new Date();
  let diff = target - now;
  if(diff <= 0){
    clearInterval(timer);
    showCelebration();
    return;
  }
  const d = Math.floor(diff/(1000*60*60*24));
  const h = Math.floor((diff%(1000*60*60*24))/(1000*60*60));
  const m = Math.floor((diff%(1000*60*60))/(1000*60));
  const s = Math.floor((diff%(1000*60))/1000);
  daysEl.textContent = d;
  hoursEl.textContent = pad(h);
  minutesEl.textContent = pad(m);
  secondsEl.textContent = pad(s);
}

function showCelebration(){
  ui.classList.add('fade-out');
  setTimeout(()=>{ ui.style.display='none'; },1000);

  celebrationMsg.classList.add('show');

  // ğŸµ å€’è®¡æ—¶ç»“æŸåè‡ªåŠ¨æ’­æ”¾éŸ³ä¹ï¼ˆæ— é¡»ç‚¹å‡»ï¼‰
  bgm.volume = 0.6;
  bgm.loop = true;
  const playPromise = bgm.play();
  if (playPromise !== undefined) {
    playPromise.catch(err => console.log("éŸ³ä¹è‡ªåŠ¨æ’­æ”¾è¢«æ‹¦æˆª:", err));
  }

  startPopups();
}

// âœ… å¼¹å¹•æ›´å¯†é›†ï¼ˆæ¯ 0~0.2s ä¸€æ¡ï¼‰
function startPopups(){
  const messages = [
    "è½©è½©ï½ç”Ÿæ—¥å¿«ä¹ï¼ğŸ¥³",
    "åˆé•¿å¤§ä¸€å²å•¦ï¼Œè¶Šæ¥è¶Šå¸…äº†ï¼",
    "å¸Œæœ›ä½ çš„ç¬‘å®¹æ°¸è¿œç¿çƒ‚ğŸŒ",
    "è›‹ç³•ä¸€å®šè¦åƒï¼Œæ„¿æœ›ä¸€å®šå®ç°ğŸ‚",
    "æœªæ¥ä¸€å¹´å¥½è¿çˆ†æ£šâœ¨",
    "ç”Ÿæ´»è¦ç”œï¼Œå¿ƒæƒ…è¦äº®ğŸ’«",
    "ä»Šå¤©çš„ä½ æœ€é—ªäº®ï¼â­",
    "æ‰€æœ‰çš„å¥½è¿éƒ½å¥”å‘ä½ ğŸ¾",
    "æ–°çš„ä¸€å²ï¼Œè¦å¼€å¿ƒè¦é—ªè€€ï¼ğŸŒŸ",
    "æ„¿ä½ æ¸©æŸ”åˆæœ‰åŠ›é‡ğŸ’ª",
    "æƒ³é€ä½ æ•´ç‰‡æ˜Ÿç©ºâœ¨",
    "è¿™ä¸–ç•Œå› ä¸ºä½ å˜å¾—æ›´å¯çˆ±ğŸ’–",
    "åˆ«å¿˜äº†æˆ‘ä¸€ç›´åœ¨ç»™ä½ åŠ æ²¹ğŸ“£",
    "è¢«å–œæ¬¢çš„äººå–œæ¬¢ï¼Œæ˜¯æœ€æµªæ¼«çš„äº‹ï½ğŸ’",
    "æ¯å¤©éƒ½è¦æœ‰å°å°å¹¸ç¦ğŸ«¶",
    "è¿™ä¸€å¹´ä¹Ÿè¦è®¤çœŸå‘å…‰å‘€ğŸ’"
  ];

  const colors = [
    "rgba(255,255,255,0.9)",
    "rgba(51,209,255,0.9)",
    "rgba(255,168,255,0.9)",
    "rgba(122,255,194,0.9)",
    "rgba(255,240,180,0.9)"
  ];

  function createPopup(text){
    const msg=document.createElement('div');
    msg.className='popup-message';
    msg.textContent=text;
    msg.style.color=colors[Math.floor(Math.random()*colors.length)];
    msg.style.left=(5+Math.random()*90)+'%';
    msg.style.top=(10+Math.random()*75)+'%';
    msg.style.transform=`translate(-50%,-50%) scale(${0.7+Math.random()*0.5})`;
    document.body.appendChild(msg);
    requestAnimationFrame(()=>{
      msg.style.opacity='1';
      msg.style.transform='translate(-50%,-50%) scale(1)';
    });
    setTimeout(()=>{
      msg.style.opacity='0';
      msg.style.transform='translate(-50%,-50%) scale(1.3)';
      setTimeout(()=>msg.remove(),800);
    }, 2500 + Math.random()*1000);
  }

  function randomPopupLoop(){
    const text = messages[Math.floor(Math.random()*messages.length)];
    createPopup(text);
    const next = Math.random() * 200; // âš¡æ›´å¿«ï¼Œ0~0.2ç§’é—´éš”
    setTimeout(randomPopupLoop, next);
  }

  randomPopupLoop();
}
</script>
</body>
</html>
