<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>è½©è½©ç”Ÿæ—¥å€’è®¡æ—¶</title>
<style>
  :root {
    --bg1:#0b1220;
    --accent:#33d1ff;
    --accent2:#7affc2;
  }
  *{box-sizing:border-box}
  html,body{
    height:100%;margin:0;
    font-family:'Inter',ui-sans-serif,system-ui;
    overflow:hidden;
  }
  body{
    background: radial-gradient(1200px 600px at 10% 20%, rgba(15,30,60,0.35), transparent),
                linear-gradient(180deg,var(--bg1) 0%, #07101a 100%);
    color:#cfeeff;
    display:flex;
    align-items:center;
    justify-content:center;
    padding:24px;
  }

  #fxCanvas{position:fixed;inset:0;z-index:0;pointer-events:none}

  /* å€’è®¡æ—¶ä¸»ä½“ */
  .ui{
    position:relative;
    z-index:2;
    width:100%;
    max-width:900px;
    text-align:center;
    padding:28px;
    border-radius:16px;
    background:rgba(255,255,255,0.02);
    backdrop-filter:blur(6px);
    box-shadow:0 8px 40px rgba(0,0,0,0.5);
    transition:opacity 1s ease, transform 1s ease;
  }
  .fade-out{opacity:0;transform:scale(0.96);pointer-events:none;}
  h1{margin:0 0 10px;font-size:28px;color:#dff9ff;}
  p.lead{margin:0 0 20px;color:#96f0ff;opacity:0.9;}
  .countdown{display:flex;gap:14px;justify-content:center;flex-wrap:wrap;margin-bottom:22px;}
  .cell{min-width:86px;padding:16px 10px;border-radius:12px;background:rgba(255,255,255,0.04);}
  .num{font-size:34px;font-weight:700;color:#fff;}
  .label{font-size:12px;color:rgba(255,255,255,0.65);margin-top:6px}

  /* å³ä¸‹è§’æŒ‰é’® */
  .enter-btn{
    position:fixed;
    bottom:24px; right:24px;
    z-index:100;
    padding:12px 24px;
    border-radius:999px;
    background:linear-gradient(90deg,var(--accent),var(--accent2));
    color:#07101a;
    font-weight:700;
    text-decoration:none;
    box-shadow:0 0 15px rgba(51,209,255,0.4);
    transition:transform .25s;
  }
  .enter-btn:hover{transform:translateY(-4px);}

  /* åº†ç¥æ–‡å­— */
  .celebration-msg{
    position:fixed;
    left:50%;top:50%;
    transform:translate(-50%,-50%) scale(.9);
    z-index:5;
    color:#fff;text-align:center;
    opacity:0;
    transition:opacity 1s ease,transform .6s ease;
    pointer-events:none;
  }
  .celebration-msg.show{opacity:1;transform:translate(-50%,-50%) scale(1);}

  /* å¼¹å¹•æ ·å¼ */
  .popup-message{
    position:fixed;
    z-index:6;
    left:50%;top:50%;
    background:rgba(255,255,255,0.1);
    backdrop-filter:blur(6px);
    padding:12px 22px;
    border-radius:14px;
    color:#fff;
    font-size:18px;
    font-weight:600;
    box-shadow:0 0 20px rgba(51,209,255,0.3);
    opacity:0;
    transform:translate(-50%,-50%) scale(0.6);
    transition:all 0.8s ease;
  }
</style>
</head>
<body>
<canvas id="fxCanvas"></canvas>

<div class="ui" id="ui">
  <h1>è·ç¦»è½©è½©ç”Ÿæ—¥è¿˜æœ‰</h1>
  <p class="lead">ç§‘æŠ€æ—¶é’Ÿæ­£åœ¨è¯»ç§’â€¦ å‡†å¤‡å¥½æƒŠå–œäº†å—ï¼Ÿ</p>
  <div class="countdown" id="countdown">
    <div class="cell"><div class="num" id="days">0</div><div class="label">å¤©</div></div>
    <div class="cell"><div class="num" id="hours">0</div><div class="label">å°æ—¶</div></div>
    <div class="cell"><div class="num" id="minutes">0</div><div class="label">åˆ†é’Ÿ</div></div>
    <div class="cell"><div class="num" id="seconds">0</div><div class="label">ç§’</div></div>
  </div>
</div>

<a class="enter-btn" href="story.html">è¿›å…¥æˆ‘ä»¬çš„æ•…äº‹å†Œ</a>

<div class="celebration-msg" id="celebrationMsg">
  <h2 style="font-size:48px;margin:0 0 10px;">ğŸ‚ è½©è½©ç”Ÿæ—¥å¿«ä¹ï¼</h2>
  <p style="font-size:20px;">å†°å†°ä¸€ç›´éƒ½åœ¨ä½ èº«è¾¹ ğŸ’™</p>
</div>

<audio id="bgm" src="happy.mp3" preload="auto"></audio>

<script>
const TARGET = new Date('2025-11-14T00:00:00');
const ui = document.getElementById('ui');
const bgm = document.getElementById('bgm');
const celebrationMsg = document.getElementById('celebrationMsg');
const daysEl = document.getElementById('days');
const hoursEl = document.getElementById('hours');
const minutesEl = document.getElementById('minutes');
const secondsEl = document.getElementById('seconds');
let interacted=false;
document.addEventListener('click',()=>{interacted=true;if(bgm.paused)bgm.play().catch(()=>{});});

function pad(n){return n.toString().padStart(2,'0');}
let timer=setInterval(update,1000);
update();

function update(){
  const now=new Date();
  let diff=TARGET-now;
  if(diff<=0){clearInterval(timer);showCelebration();return;}
  const d=Math.floor(diff/86400000);
  const h=Math.floor((diff%86400000)/3600000);
  const m=Math.floor((diff%3600000)/60000);
  const s=Math.floor((diff%60000)/1000);
  daysEl.textContent=d;hoursEl.textContent=pad(h);minutesEl.textContent=pad(m);secondsEl.textContent=pad(s);
}

function showCelebration(){
  ui.classList.add('fade-out');
  setTimeout(()=>ui.remove(),1000);
  celebrationMsg.classList.add('show');
  if(interacted){bgm.volume=0.6;bgm.loop=true;bgm.play().catch(()=>{});}
  else alert("ğŸµ ç‚¹ä¸€ä¸‹é¡µé¢æ’­æ”¾ç”Ÿæ—¥å¿«ä¹æ­Œï½");
  startPopups();
}

/* å¼¹å¹•éƒ¨åˆ† */
function startPopups(){
  const messages=[
    "è½©è½©ï½ä»Šå¤©æ˜¯ä½ çš„ç”Ÿæ—¥ï¼ğŸ‰",
    "åˆé•¿å¤§ä¸€å²å•¦ï½è¶Šæ¥è¶Šå¸…äº†å§ğŸ˜",
    "è›‹ç³•åƒå¤šç‚¹ï¼åˆ«çœï½ğŸ°",
    "æ„¿è¿™ä¸€å¹´æ¸©æŸ”åˆé—ªé—ªå‘å…‰âœ¨",
    "æˆ‘ä¼šä¸€ç›´åœ¨ä½ èº«è¾¹ğŸ’™",
    "å˜¿å˜¿ï½å·å·è¯´ï¼šä½ è¶…æ£’çš„ï¼ğŸ¥°",
    "ç¬‘ä¸€ç¬‘ï¼Œçƒ¦æ¼å°±è·‘æ‰ï½ğŸŒˆ",
    "ç”Ÿæ—¥å¿«ä¹å‘€æˆ‘çš„å®‡å®™å°å…‰âœ¨"
  ];
  const colors=[
    "rgba(255,255,255,0.9)",
    "rgba(51,209,255,0.9)",
    "rgba(122,255,194,0.9)",
    "rgba(255,180,255,0.9)",
    "rgba(255,240,180,0.9)"
  ];

  function createPopup(text){
    const msg=document.createElement('div');
    msg.className='popup-message';
    msg.textContent=text;
    msg.style.color=colors[Math.floor(Math.random()*colors.length)];
    msg.style.left=(10+Math.random()*80)+'%';
    msg.style.top=(15+Math.random()*70)+'%';
    document.body.appendChild(msg);
    // æ·¡å…¥
    requestAnimationFrame(()=>{
      msg.style.opacity='1';
      msg.style.transform='translate(-50%,-50%) scale(1)';
    });
    // æ·¡å‡ºå¹¶ç§»é™¤
    setTimeout(()=>{
      msg.style.opacity='0';
      msg.style.transform='translate(-50%,-50%) scale(1.3)';
      setTimeout(()=>msg.remove(),800);
    },2800+Math.random()*1000);
  }

  // æ¯éš”ä¸€æ®µæ—¶é—´å¾ªç¯å¼¹å‡º
  function wave(){
    for(let i=0;i<messages.length;i++){
      setTimeout(()=>createPopup(messages[i]),i*150);
    }
  }
  wave();
  setInterval(wave,6000);
}
</script>
</body>
</html>
