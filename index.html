<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>è½©è½©ç”Ÿæ—¥å€’è®¡æ—¶</title>
<style>
  :root{
    --bg1:#0b1220;
    --accent:#33d1ff;
    --accent2:#7affc2;
  }
  *{box-sizing:border-box;}
  html,body{
    height:100%;margin:0;
    font-family:Inter,ui-sans-serif,system-ui;
    overflow:hidden;
  }
  body{
    background: radial-gradient(1200px 600px at 10% 20%, rgba(15,30,60,0.35), transparent),
                linear-gradient(180deg,var(--bg1) 0%, #07101a 100%);
    color:#cfeeff;
    display:flex;align-items:center;justify-content:center;
    padding:24px;
  }

  /* å€’è®¡æ—¶éƒ¨åˆ† */
  .ui{
    position:relative;z-index:2;
    text-align:center;
    padding:28px;
    border-radius:16px;
    background:rgba(255,255,255,0.04);
    backdrop-filter:blur(6px);
    transition:opacity 1s ease, transform 1s ease;
  }
  .fade-out{opacity:0;transform:scale(0.95);pointer-events:none;}
  h1{margin:0 0 14px;font-weight:600;font-size:28px;}
  p.lead{margin:0 0 20px;color:#96f0ff;opacity:0.9;}
  .countdown{display:flex;gap:14px;justify-content:center;flex-wrap:wrap;}
  .cell{min-width:86px;padding:16px;border-radius:12px;background:rgba(255,255,255,0.03);}
  .num{font-size:34px;font-weight:700;color:#fff;}
  .label{font-size:12px;color:rgba(255,255,255,0.65);margin-top:6px;}

  /* åº†ç¥å†…å®¹ */
  .celebration-msg{
    position:fixed;left:50%;top:50%;
    transform:translate(-50%,-50%) scale(.9);
    color:#fff;text-align:center;
    opacity:0;transition:all 1s ease;
    z-index:5;pointer-events:none;
  }
  .celebration-msg.show{
    opacity:1;transform:translate(-50%,-50%) scale(1);
  }
  .celebration-msg h2{font-size:46px;margin:0 0 12px;}
  .celebration-msg p{margin:0;font-size:18px;}

  /* å³ä¸‹è§’æŒ‰é’® */
  .enter-btn{
    position:fixed;bottom:24px;right:24px;
    padding:12px 24px;border-radius:999px;
    background:linear-gradient(90deg,var(--accent),var(--accent2));
    color:#07101a;font-weight:700;text-decoration:none;
    box-shadow:0 8px 30px rgba(51,209,255,0.2);
    z-index:10;
    transition:transform .25s;
  }
  .enter-btn:hover{transform:translateY(-4px);}

  /* å¼¹å¹• */
  .danmu{
    position:fixed;
    white-space:nowrap;
    font-size:18px;
    font-weight:600;
    z-index:20;
    opacity:0;
    pointer-events:none;
    text-shadow:0 0 8px rgba(255,255,255,0.6);
    transition:opacity 1s;
  }
  @keyframes floatLeft{
    0%{transform:translateX(100vw);opacity:0;}
    10%{opacity:1;}
    90%{opacity:1;}
    100%{transform:translateX(-100vw);opacity:0;}
  }
  @keyframes floatRight{
    0%{transform:translateX(-100vw);opacity:0;}
    10%{opacity:1;}
    90%{opacity:1;}
    100%{transform:translateX(100vw);opacity:0;}
  }
</style>
</head>
<body>

<div class="ui" id="ui">
  <h1>è·ç¦»è½©è½©ç”Ÿæ—¥è¿˜æœ‰</h1>
  <p class="lead">ç§‘æŠ€æ—¶é’Ÿæ­£åœ¨è¯»ç§’â€¦ å‡†å¤‡å¥½æƒŠå–œäº†å—ï¼Ÿ</p>
  <div class="countdown">
    <div class="cell"><div class="num" id="days">0</div><div class="label">å¤©</div></div>
    <div class="cell"><div class="num" id="hours">0</div><div class="label">å°æ—¶</div></div>
    <div class="cell"><div class="num" id="minutes">0</div><div class="label">åˆ†é’Ÿ</div></div>
    <div class="cell"><div class="num" id="seconds">0</div><div class="label">ç§’</div></div>
  </div>
</div>

<a class="enter-btn" href="story.html">è¿›å…¥æˆ‘ä»¬çš„æ•…äº‹å†Œ</a>

<div class="celebration-msg" id="celebrationMsg">
  <h2>ğŸ‚ è½©è½©ç”Ÿæ—¥å¿«ä¹ï¼</h2>
  <p>å†°å†°ç¥ä½ æ–°çš„ä¸€å²å…‰èŠ’ä¸‡ä¸ˆ ğŸ’™</p>
</div>

<audio id="bgm" src="happy.mp3" preload="auto"></audio>

<script>
const TARGET = new Date('2025-11-14T00:00:00');
const daysEl=document.getElementById('days');
const hoursEl=document.getElementById('hours');
const minutesEl=document.getElementById('minutes');
const secondsEl=document.getElementById('seconds');
const ui=document.getElementById('ui');
const celebrationMsg=document.getElementById('celebrationMsg');
const bgm=document.getElementById('bgm');

let userInteracted=false;
document.addEventListener('click',()=>{userInteracted=true;if(bgm.paused)bgm.play().catch(()=>{});});

function pad(n){return n.toString().padStart(2,'0');}
let timer=setInterval(update,1000);
update();
function update(){
  const now=new Date();
  const diff=TARGET-now;
  if(diff<=0){
    clearInterval(timer);
    startCelebration();
    return;
  }
  const d=Math.floor(diff/(1000*60*60*24));
  const h=Math.floor(diff%(1000*60*60*24)/(1000*60*60));
  const m=Math.floor(diff%(1000*60*60)/(1000*60));
  const s=Math.floor(diff%(1000*60)/1000);
  daysEl.textContent=d;
  hoursEl.textContent=pad(h);
  minutesEl.textContent=pad(m);
  secondsEl.textContent=pad(s);
}

function startCelebration(){
  ui.classList.add('fade-out');
  setTimeout(()=>ui.remove(),1000);
  setTimeout(()=>celebrationMsg.classList.add('show'),1200);
  if(userInteracted){bgm.loop=true;bgm.play().catch(()=>{});}
  else alert('ğŸµ ç‚¹ä¸€ä¸‹é¡µé¢æ’­æ”¾ç”Ÿæ—¥å¿«ä¹æ­Œï½');
  startDanmu();
}

function startDanmu(){
  const texts=[
    "ğŸ‰ è½©è½©ç”Ÿæ—¥å¿«ä¹ï¼",
    "ğŸ‚ åˆé•¿å¤§ä¸€å²å•¦ï½",
    "âœ¨ æ„¿ä½ è¿™ä¸€å¹´é—ªé—ªå‘å…‰ï¼",
    "ğŸ’™ å†°å†°ä¸€ç›´éƒ½åœ¨ä½ èº«è¾¹",
    "ğŸˆ æ„¿ä½ è¢«ä¸–ç•Œæ¸©æŸ”ä»¥å¾…",
    "ğŸ° ç”Ÿæ´»è¦ç”œï¼Œæ¢¦æƒ³è¦åœ†",
    "ğŸ˜š è®°å¾—å¤©å¤©å¼€å¿ƒå‘€ï½",
    "ğŸŒˆ ä¸€åˆ‡éƒ½ä¼šè¶Šæ¥è¶Šå¥½ï¼"
  ];
  const colors=[
    "#33d1ff","#7affc2","#ffb7ff","#ffee99","#ff8f8f","#aaffff"
  ];

  function createDanmu(){
    const text=texts[Math.floor(Math.random()*texts.length)];
    const color=colors[Math.floor(Math.random()*colors.length)];
    const div=document.createElement('div');
    div.className='danmu';
    div.textContent=text;
    div.style.color=color;
    const fromRight=Math.random()>0.5;
    div.style.top=Math.random()*80+10+"%";
    div.style.fontSize=(18+Math.random()*10)+"px";
    div.style.animation=`${fromRight?'floatLeft':'floatRight'} ${6+Math.random()*3}s linear`;
    document.body.appendChild(div);
    requestAnimationFrame(()=>div.style.opacity='1');
    setTimeout(()=>div.remove(),9000);
  }

  // æ¯éš”1ç§’éšæœºç”Ÿæˆ1~2æ¡å¼¹å¹•
  setInterval(()=>{
    const n=1+Math.floor(Math.random()*2);
    for(let i=0;i<n;i++) setTimeout(createDanmu,Math.random()*500);
  },1000);
}
</script>
</body>
</html>
