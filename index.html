<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>è½©è½©ç”Ÿæ—¥å€’è®¡æ—¶</title>
<style>
  :root{
    --bg1:#0b1220;
    --accent:#33d1ff;
    --accent2:#7affc2;
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;font-family:Inter,ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial;}
  body{
    background: radial-gradient(1200px 600px at 10% 20%, rgba(15,30,60,0.35), transparent),
                linear-gradient(180deg,var(--bg1) 0%, #07101a 100%);
    color:#cfeeff;
    overflow:hidden;
    display:flex;
    align-items:center;
    justify-content:center;
    padding:24px;
  }
  #fxCanvas{position:fixed;inset:0;z-index:0;pointer-events:none}
  .ui{
    position:relative;
    z-index:2;
    width:100%;
    max-width:980px;
    text-align:center;
    padding:28px;
    border-radius:16px;
    background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));
    box-shadow:0 10px 40px rgba(2,6,23,0.7), inset 0 1px 0 rgba(255,255,255,0.03);
    backdrop-filter:blur(6px) saturate(120%);
    transition:opacity 1s ease, transform 1s ease;
  }
  .ui.fade-out{
    opacity:0;
    transform:scale(0.96);
    pointer-events:none;
  }
  h1{margin:0 0 14px 0;font-weight:600;letter-spacing:1px;font-size:28px;color:#dff9ff;}
  p.lead{margin:0 0 20px 0;color:#96f0ff;opacity:0.9;font-size:14px;}
  .countdown{display:flex;gap:14px;justify-content:center;flex-wrap:wrap;margin-bottom:22px;}
  .cell{min-width:86px;padding:16px 10px;border-radius:12px;background:rgba(255,255,255,0.03);color:#e6fbff;}
  .num{font-size:34px;font-weight:700;letter-spacing:1px;color:#fff;}
  .label{font-size:12px;color:rgba(255,255,255,0.65);margin-top:6px}

  /* å›ºå®šå³ä¸‹è§’æŒ‰é’® */
  .enter-btn{
    position:fixed;
    bottom:24px;
    right:24px;
    display:inline-block;
    padding:12px 24px;
    border-radius:999px;
    background:linear-gradient(90deg,var(--accent),var(--accent2));
    color:#07101a;
    font-weight:700;
    text-decoration:none;
    box-shadow:0 8px 30px rgba(51,209,255,0.12),0 2px 6px rgba(0,0,0,0.4);
    transform:translateY(0);
    transition:transform .22s ease,box-shadow .22s;
    animation:glow 3s ease-in-out infinite alternate;
    z-index:100;
  }
  .enter-btn:hover{transform:translateY(-4px);}
  @keyframes glow{
    from{box-shadow:0 0 8px var(--accent);}
    to{box-shadow:0 0 18px var(--accent2);}
  }

  .celebration-msg{
    position:absolute;
    left:50%;top:50%;
    transform:translate(-50%,-50%) scale(.9);
    z-index:3;
    pointer-events:none;
    color:#fff;
    text-align:center;
    opacity:0;
  }
  .celebration-msg.show{
    opacity:1;
    pointer-events:auto;
    animation:popIn .9s cubic-bezier(.2,.9,.3,1);
  }
  .celebration-msg h2{font-size:46px;margin:0 0 12px 0;}
  .celebration-msg p{margin:0;color:rgba(255,255,255,0.9);font-size:18px}
  @keyframes popIn{0%{transform:translate(-50%,-50%) scale(.6);opacity:0}60%{transform:translate(-50%,-50%) scale(1.06);opacity:1}100%{transform:translate(-50%,-50%) scale(1)}}

  .popup-message{
    position:fixed;
    left:50%;
    top:50%;
    transform:translate(-50%,-50%) scale(0.8);
    background:rgba(255,255,255,0.08);
    backdrop-filter:blur(6px);
    padding:16px 24px;
    border-radius:14px;
    color:#fff;
    font-size:18px;
    font-weight:600;
    box-shadow:0 0 20px rgba(51,209,255,0.3);
    opacity:0;
    transition:all 0.8s ease;
    z-index:99;
  }
</style>
</head>
<body>
<canvas id="fxCanvas"></canvas>

<div class="ui" id="ui">
  <h1 id="title">è·ç¦»è½©è½©ç”Ÿæ—¥è¿˜æœ‰</h1>
  <p class="lead" id="subtitle">ç§‘æŠ€æ—¶é’Ÿæ­£åœ¨è¯»ç§’â€¦ å‡†å¤‡å¥½æƒŠå–œäº†å—ï¼Ÿ</p>

  <div class="countdown" id="countdown">
    <div class="cell"><div class="num" id="days">0</div><div class="label">å¤©</div></div>
    <div class="cell"><div class="num" id="hours">0</div><div class="label">å°æ—¶</div></div>
    <div class="cell"><div class="num" id="minutes">0</div><div class="label">åˆ†é’Ÿ</div></div>
    <div class="cell"><div class="num" id="seconds">0</div><div class="label">ç§’</div></div>
  </div>
</div>

<a class="enter-btn" id="enterBtn" href="story.html">è¿›å…¥æˆ‘ä»¬çš„æ•…äº‹å†Œ</a>

<div class="celebration-msg" id="celebrationMsg" aria-hidden="true">
  <h2 id="mainText">ğŸ‚ è½©è½©ç”Ÿæ—¥å¿«ä¹</h2>
  <p id="subText">å†°å†°ä¸€ç›´éƒ½åœ¨ä½ èº«è¾¹ ğŸ’™</p>
</div>

<audio id="bgm" src="happy.mp3" preload="auto"></audio>

<script>
const TARGET = new Date('2025-11-14T00:00:00');
const CANVAS = document.getElementById('fxCanvas');
const ctx = CANVAS.getContext('2d');
let W = CANVAS.width = innerWidth;
let H = CANVAS.height = innerHeight;
const daysEl = document.getElementById('days');
const hoursEl = document.getElementById('hours');
const minutesEl = document.getElementById('minutes');
const secondsEl = document.getElementById('seconds');
const ui = document.getElementById('ui');
const bgm = document.getElementById('bgm');
const celebrationMsg = document.getElementById('celebrationMsg');
const title = document.getElementById('title');
const subtitle = document.getElementById('subtitle');

addEventListener('resize', ()=>{ W = CANVAS.width = innerWidth; H = CANVAS.height = innerHeight; });
let userInteracted = false;
document.addEventListener('click', () => { userInteracted = true; if(bgm.paused) bgm.play().catch(()=>{}); });

function pad(n){ return n.toString().padStart(2,'0'); }

let countdownTimer = setInterval(updateCountdown, 1000);
updateCountdown();

function updateCountdown(){
  const now = new Date();
  let diff = TARGET - now;
  if(diff <= 0){
    clearInterval(countdownTimer);
    showCelebration();
    return;
  }
  const d = Math.floor(diff / (1000*60*60*24));
  const h = Math.floor((diff % (1000*60*60*24)) / (1000*60*60));
  const m = Math.floor((diff % (1000*60*60)) / (1000*60));
  const s = Math.floor((diff % (1000*60)) / 1000);
  daysEl.textContent = d;
  hoursEl.textContent = pad(h);
  minutesEl.textContent = pad(m);
  secondsEl.textContent = pad(s);
}

let particles = [], hearts = [];
class P {
  constructor(x,y,dx,dy,size,color,life){this.x=x;this.y=y;this.vx=dx;this.vy=dy;this.r=size;this.c=color;this.life=life||1;this.alpha=1;}
  update(dt){this.x+=this.vx*dt;this.y+=this.vy*dt;this.vy*=0.999;this.alpha-=0.008*dt;this.life-=0.008*dt;}
  draw(g){g.save();g.globalAlpha=Math.max(this.alpha,0);g.fillStyle=this.c;g.beginPath();g.arc(this.x,this.y,this.r,0,Math.PI*2);g.fill();g.restore();}
}
function spawnNeonBurst(x,y,count){for(let i=0;i<count;i++){const a=Math.random()*Math.PI*2,s=60+Math.random()*220;particles.push(new P(x,y,Math.cos(a)*s,Math.sin(a)*s,2+Math.random()*5,`hsl(${180+Math.random()*120},90%,60%)`,1));}}
function spawnHeartParticles(total=160){const scale=Math.min(W,H)/60;for(let i=0;i<total;i++){const t=(i/total)*Math.PI*2;const x=16*Math.pow(Math.sin(t),3);const y=13*Math.cos(t)-5*Math.cos(2*t)-2*Math.cos(3*t)-Math.cos(4*t);const px=W/2+x*scale, py=H/2-y*scale;hearts.push(new P(px,py,(Math.random()-0.5)*20,(Math.random()-0.5)*20,3+Math.random()*3,`hsl(${320+Math.random()*40},90%,65%)`,2.2));}}
function loop(){ctx.clearRect(0,0,W,H);for(let p of particles)p.update(1),p.draw(ctx);for(let p of hearts)p.update(0.6),p.draw(ctx);particles=particles.filter(p=>p.life>0&&p.alpha>0);hearts=hearts.filter(p=>p.life>0&&p.alpha>0);requestAnimationFrame(loop);}requestAnimationFrame(loop);

async function showCelebration(){
  ui.classList.add('fade-out');
  title.style.opacity = '0';
  subtitle.style.opacity = '0';

  if(userInteracted){
    bgm.volume = 0.6; bgm.loop = true;
    bgm.play().catch(()=>{alert("ç‚¹ä¸€ä¸‹é¡µé¢ä»¥å¼€å¯éŸ³ä¹å“¦ğŸµ");});
  } else alert("ğŸµ ç‚¹ä¸€ä¸‹é¡µé¢ï¼Œå¼€å¯ç”Ÿæ—¥å¿«ä¹æ­Œï¼");

  spawnNeonBurst(W/2,H/2,220);
  setTimeout(()=>spawnHeartParticles(240),600);
  celebrationMsg.classList.add('show');

  const messages = [
    "å˜¿ï¼Œè½©è½©ï½ä»Šå¤©æ˜¯ä½ çš„ç”Ÿæ—¥ï¼ğŸ¥³",
    "åˆé•¿å¤§ä¸€å²å•¦ï¼Œè¶Šæ¥è¶Šå¸…äº†æ˜¯ä¸æ˜¯ï½",
    "è›‹ç³•ä¸€å®šè¦åƒï¼Œæ„¿æœ›ä¸€å®šå®ç°ğŸ‚",
    "å¸Œæœ›ä½ è¿™ä¸€å¹´éƒ½é¡ºé¡ºåˆ©åˆ©âœ¨",
    "å¤šç¬‘ç¬‘ï¼Œå‹åŠ›éƒ½ç»™æˆ‘æ‰”æ‰ï¼ğŸ˜",
    "å…¶å®æœ‰ç‚¹æƒ³ä½ ~",
    "ä½ çœŸçš„å¾ˆæ£’ğŸ’ª",
    "æˆ‘ä¸€ç›´åœ¨è¿™å„¿ï¼Œçœ‹ç€ä½ ä¸€ç‚¹ç‚¹å˜å¥½ğŸ’™",
    "å¤©å¤©å¼€å¿ƒï¼ğŸŒˆ"
  ];
  const colors = [
    "rgba(255,255,255,0.8)",
    "rgba(51,209,255,0.9)",
    "rgba(122,255,194,0.9)",
    "rgba(255,168,255,0.9)",
    "rgba(255,240,180,0.9)"
  ];

  function createPopup(text){
    const msg=document.createElement('div');
    msg.className='popup-message';
    msg.textContent=text;
    msg.style.color=colors[Math.floor(Math.random()*colors.length)];
    msg.style.left=(20+Math.random()*60)+'%';
    msg.style.top=(20+Math.random()*60)+'%';
    msg.style.transform=`translate(-50%,-50%) scale(${0.6+Math.random()*0.4})`;
    document.body.appendChild(msg);
    requestAnimationFrame(()=>{msg.style.opacity='1';msg.style.transform+=' scale(1.1)';});
    setTimeout(()=>{msg.style.opacity='0';msg.style.transform+=' scale(1.3)';setTimeout(()=>msg.remove(),800);},2500+Math.random()*800);
  }

  // å¼¹å¹•æŒç»­å¾ªç¯
  function popupWave(){
    for(let i=0;i<messages.length;i++){
      setTimeout(()=>createPopup(messages[i]),i*150);
    }
  }
  popupWave();
  setInterval(popupWave, 6000); // æ¯éš”6ç§’å¾ªç¯ä¸€æ¬¡
}
</script>
</body>
</html>
